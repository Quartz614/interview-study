# Bean 정의, 생명주기, 스코프

### 빈 개념

- 스프링 컨테이너에 의해 관리되는 객체
- 스프링 컨테이너에 등록된 객체를 스프링 빈이라 함
- 빈은 클래스의 등록정보, getter/setter 메서드를 포함
- 빈은 컨테이너에 의해 생성되는 설정 메타데이터로 생성

### 빈 등록 방법

- component scan
    - @Component 을 명시하여 빈을 등록
    - @Component 외에 @Controller, @Service, @Repository, @Configuration는 @Component의 상속을 받고 있으므로 모두 컴포넌트 스캔의 대상
        - @Controller : Spring MVC 컨트롤러로 인식
        - @Repository : 스프링 데이터 접근 계층으로 인식하고 해당 계층에서 발생하는 예외는 모두 DataAccessException으로 변환
        - @Service : 특별한 처리는 하지 않으나, 개발자들이 핵심 비즈니스 계층을 인식하는데 도움을 줌
        - @Configuration : 스프링 설정 정보로 인식하고 스프링 빈이 싱글톤을 유지하도록 추가 처리를 함 (물론 스프링 빈 스코프가 싱글톤이 아니라면 추가 처리를 하지 않음)
- java 코드 등록
    - @Configuration 을 활용하여 등록
    - 빈을 등록하기 위해 인스턴스를 생성하는 메소드 위에 @Bean를 명시
    - @Configuration에는 @Component가 있으므로 컴포넌트 스캔이 대상이 되어 자동 스캔을 통해 빈 등록이 가능
    

### 빈의 생명주기

- 객체 생성 → 의존 설정 → 초기화 → 소멸
- 스프링 빈의 이벤트 라이프 사이클
    - 스프링 컨테이너 생성 → 스프링 빈 생성 → 의존관계 주입 → 초기화 콜백 → 앱 본연의 동작 수행 → 소멸전 콜백 → 스프링 종료

 

### 빈 스코프

빈이 존재할 수 있는 범위

- 싱글톤(Singleton) : 기본 스코프, 스프링 컨테이너의 시작과 종료까지 유지되는 가장 넓은 범위의 스코프
- 프로토타입(Prototype) : 스프링 컨테이너는 프로토타입 빈의 생성과 의존관계 주입까지만 관여하고 더는 관리하지 않는 매우 짧은 범위의 스코프

## (면접)Bean 정의, 생명주기, 스코프

### Bean 정의

빈은 스프링 컨테이너에 의해 등록되고 관리되는 객체를 말합니다. 빈은 클래스의 등록정보, getter/setter 메서드를 포함하며 컨테이너에 의해 생성되는 메타데이터로 생성합니다.

### Bean 생명주기

빈의 생명주기는 컨테이너에 의해 관리되며 객체 생성, 의존 설정, 초기화, 소멸의 단계를 가집니다.

스프링 빈의 이벤트 라이프 사이클로는 스프링 컨테이너 생성 → 스프링 빈 생성 → 의존관계 주입 →  초기화 콜백 → 앱 본연의 동작 → 소멸전 콜백 → 스프링 종료의 사이클을 가집니다.

### Bean 스코프

빈 스코프는 빈이 존재할 수 있는 범위를 말합니다. 싱클톤과 프로토타입이 존재하며 싱글톤은 기본 스코프로 스프링 컨테이너의 시작과 종료까지 유지되는 가장 넓은 범위의 스코프입니다. 프로토타입은 스프링 컨테이너가 프로토타입 빈의 생성과 의존관계 주입까지만 관여하고 더는 관리하지 않는 매우 짧은 범위의 스코프 입니다.

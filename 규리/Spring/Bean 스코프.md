2023/01/10

### 🧑‍💻 **기술블로깅 TechBlog** 🪚

<aside>
💡 Bean Scope

</aside>

<br><br>

* 공부를 위해서 하는 블로깅으로 잘못된 정보가 있을 수 있습니다.

## [ Spring ] **Bean 스코프**

**🔩 Bean 스코프**

---

빈 Bean + 스코프 Scope(범위)

빈의 생성부터 소멸까지 **빈이 존재할 수 있는 범위**

<br><br>

**🔩 Bean 스코프 종류**

---

1. 싱글톤
2. 프로토타입
3. 웹 스코프

<br><br>

**🔩 싱글톤**

---

= 기본 스코프

스프링 컨테이너의 시작과 종료까지 유지되는 **가장 넓은 범위의 스코프**

싱글톤 스코프의 빈 조회 시 스프링 컨테이너는 항상 같은 인스턴스의 빈 반환

<br><br>

**🔩 프로토타입**

---

빈의 생성과 의존관계 주입까지만 관여하는 **짧은 범위의 스코프**

프로토타입 스코프의 빈 조회 시 스프링 컨테이너는 항상 새로운 인스턴스 생성 후 반환

`@Scope("종류")` 애너테이션 사용하여 스코프 지정

종료 메서드는 호출되지 않기 때문에 프로토타입 빈을 조회한 클라이언트가 관리해야 함

종료 메서드에 대한 호출도 클라이언트가 직접 해야 함

<br><br>

**🔩 웹 스코프**

---

**웹 환경에서만 동작**

해당 스코프의 시작부터 종료시점까지 관리

<br>

- **request**
    
    HTTP 요청 하나가 들어오고 나갈 때 까지 유지되는 스코프
    
    요청마다 별도의 빈 인스턴스 생성
    
- **session**
    
    HTTP ****Session과 동일한 생명주기를 가지는 스코프
    
- **application**
    
    서블릿 컨텍스트( ServletContext )와 동일한 생명주기를 가지는 스코프
    
    톰캣 컨테이너 실행 시 애플리케이션 하나당 한개의 서블릿컨텍스트가 생성
    
    생명 주기는 보통 톰캣의 시작과 종료와 일치
    
    *서블릿 컨텍스트: web application내에 있는 모든 서블릿들을 관리하며 정보공유할 수 있게 도와 주는 역할
    
- **websocket**
    
    웹 소켓과 동일한 생명주기를 가지는 스코프
    

<br><br>

🔩 **예비 답변**

---

Q. 빈 Bean 스코프에 대해 말해보세요.

**빈 스코프**란 단어 그대로 _빈의 생성부터 소멸까지 빈이 존재할 수 있는 범위_입니다.

빈 스코프의 종류로는 크게 싱글톤, 프로토타입, 웹 소켓이 있는데,

**싱글톤은** 스프링 컨테이너의 시작과 종료까지 유지되는 가장 넓은 범위의 스코프로 싱글톤 스코프의 빈을 조회하면 스프링 컨테이너는 _항상 같은 인스턴스의 빈을 반환_ 한다는 특징을 가지고 있습니다.

**프로토타입은** 빈의 생성과 의존관계 주입까지만 관여하는 짧은 범위의 스코프로 프로토타입 스코프의 빈을 조회하면 스프링 컨테이너는 _항상 새로운 인스턴스를 생성하고 반환_ 한다는 특징을 가지고 있습니다.

마지막으로 **웹** **스코프는** 웹 환경에서만 동작하는 스코프로 해당 스코프의 시작부터 종료시점까지 관리하는 스코프입니다. 
웹 스코프의 경우 각 요청이 들어오고 나갈때까지 유지되는 스코프, 세션이 생성되고 종료될때까지 유지되는 스코프, 웹의 서블릿 컨텍스트와 동일한 생명주기를 갖는 스코프, 웹 소켓과 동일한 생명주기를 가지는 스코프 등이 있습니다. 

<br><br>

🔩 **참고**

---

블로그

[[Spring] 빈 스코프(Bean Scope)란? Dependency Lookup(DL)이란?](https://code-lab1.tistory.com/186)

[[Spring] 핵심 원리 9 빈 스코프](https://bangu4.tistory.com/302)

<br><br>

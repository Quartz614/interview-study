2023/01/10

### 🧑‍💻 **기술블로깅 TechBlog** 🪚

<aside>
💡 Bean LifeCycle

</aside>

* 공부를 위해서 하는 블로깅으로 잘못된 정보가 있을 수 있습니다.

<br><br>

## [ Spring ] **Bean 생명주기**

**🔩 Bean 생명주기**

---

**스프링 컨테이너에 의해 생명주기 관리**

스프링 컨테이너가 가동되고 본격적으로 앱이 동작하기 전에 한 번, 스프링이 종료되기 전에 한 번 특정한 동작을 수행할 수 있는 이벤트 존재

<br>

1. **스프링 컨테이너 생성**
2. **스프링 빈 생성**
3. **의존 관계 주입**
    
    의존관계 주입(생성자 주입)은 필수정보를 받고 메모리 할당을 통해 객채 생성 책임
    
    초기화는 생성된 값들을 활용해 외부 커넥션을 연결하는 등 무거운 작업 수행
    
    명확하게 분리하는 것이 유지보수 관점에서 좋음
    
4. **초기화 콜백(EVENT)**
    
    테스트로 사용할 데이터를 앱의 사전 동작 전에 미리 저장
    
5. **앱 본연의 동작 수행**
6. **소멸전 콜백(EVENT)**
    
    사고에 가깝게 스프링이 종료되는 상황에서 데이터를 백업하는 등의 동작 수행
    
7. **스프링 종료**

<br><br>

**+ 사용 방식**

---

1. 클래스가 InitializingBean과 DisposalBean을 상속받은 후 afterPropertiesSet, destroy 메서드 구현
    
    → 초기화 콜백시 afterPropertiesSet이, 소멸전 콜백색 destroy가 호출
    
2. @Bean 애노테이션에 내장된 설정방식으로 각각 initMethod 필드와 destroyMethod필드의 생성과 소멸시 적용될 메서드명 설정
    
    ```java
    @Bean(initMethod="start", destroyMethod="end")
    ```
    
3. @PostConstruct, @Predestroy 애너테이션을 일반적으로 가장 많이 사용되며 권장됨

<br><br>

🔩 **예비 답변**

---

Q. 빈 Bean 생명주기에 대해 말해보세요.

빈은 스프링 컨테이너에 의해 생명주기가 관리됩니다. ****

빈의 생명주기는 스프링 컨테이너 생성한 후 스프링 빈을 생성하고 의존 관계 주입한 후 초기화 콜백 이벤트 발생, 앱 본연의 동작 수행, 소멸전 콜백 이벤트 발생, 스프링 종료 순서로 진행됩니다.

스프링 컨테이너가 가동되고 본격적으로 앱이 동작하기 전에 한 번, 스프링이 종료되기 전에 한 번 특정한 동작을 수행할 수 있는 이벤트 존재하며 초기화와 소멸 메서드는 **@PostConstruct, @PreDestroy** 애너테이션을 사용하는 것이 권장됩니다.

<br><br>

🔩 **참고**

---

블로그

[스프링 기본 원리 4. 스프링 Bean의 생명주기](https://velog.io/@zenon8485/%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EB%B3%B8-%EC%9B%90%EB%A6%AC-4.-%EC%8A%A4%ED%94%84%EB%A7%81-Bean%EC%9D%98-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0)

<br><br>
